<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>仕込み計算</title>

<link rel="icon" type="image/png" href="favicon.png">

<style>
  body { font-family: system-ui; margin: 20px; }
  .card { max-width: 860px; margin: auto; padding: 16px; border: 1px solid #ddd; border-radius: 12px; }

  h3 { margin: 18px 0 8px; }

  .grid {
    display: grid;
    grid-template-columns: 120px 1fr 1fr;
    gap: 8px 12px;
    align-items: center;
  }

  .expr { text-align: right; font-weight: bold; }

  .date {
    font-size: 12px;
    border: 1px solid #ddd;
    padding: 2px 8px;
    border-radius: 999px;
    text-align: center;
  }

  .bigrow {
    display:flex;
    justify-content: space-between;
    padding: 8px 0;
    border-top: 1px solid #eee;
  }

  .big { font-size: 22px; font-weight: bold; }

  .section {
    border: 1px solid #ccc;
    padding: 10px;
    margin-bottom: 12px;
    border-radius: 8px;
  }

  .section-title {
    font-weight: bold;
    margin-bottom: 6px;
    font-size: 18px;
  }

  .label-bold { font-weight: bold; margin-bottom: 6px; }

  .input-group { margin-bottom: 10px; }
  .input-group label { display: block; font-size: 14px; margin-bottom: 2px; }

  .input-group input {
    width: 100%;
    max-width: 250px;
    padding: 8px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 8px;
  }

  .other-row{
    display:flex;
    justify-content: space-between;
    padding: 8px 0;
    border-top: 1px solid #eee;
  }

  .debug-wrap { margin-bottom: 12px; }
  .debug-row {
    display:flex;
    align-items:center;
    gap: 10px;
    flex-wrap: wrap;
  }
  .debug-grid {
    display: grid;
    grid-template-columns: 160px 1fr;
    gap: 8px 12px;
    margin-top: 10px;
  }
  .debug-grid label { font-size: 14px; }
  .debug-grid input {
    width: 100%;
    max-width: 250px;
    padding: 6px;
    font-size: 14px;
    border: 1px solid #ccc;
    border-radius: 8px;
  }
  .muted { font-size: 12px; color: #666; }
  .hidden { display:none; }

  .debug-preview {
    margin-top: 8px;
    font-size: 14px;
  }
  .debug-preview .row{
    display:flex;
    gap: 10px;
    padding: 2px 0;
  }
  .debug-preview .k{
    width: 90px;
    color: #444;
  }
  .debug-preview .v{
    font-weight: 600;
  }
</style>
</head>

<body>
<div class="card">

<h2>仕込み計算</h2>

<!-- 以降はそのまま（省略なしで完全維持） -->

<!-- デバッグ -->
<div class="section debug-wrap">
  <div class="section-title">デバッグ</div>

  <div class="debug-row">
    <label style="display:flex;align-items:center;gap:8px;">
      <input id="debugToggle" type="checkbox">
      デバッグモード
    </label>
    <span class="muted">ONのとき「本日（基準日）」を入れると、明日/明後日/明々後日を自動設定します</span>
  </div>

  <div id="debugPanel" class="hidden">
    <div class="debug-grid">
      <label for="dbg_base">本日（基準日）</label>
      <div>
        <input id="dbg_base" type="date">

        <div class="debug-preview">
          <div class="row"><div class="k">明日</div><div class="v" id="dbg_show_d1">-</div></div>
          <div class="row"><div class="k">明後日</div><div class="v" id="dbg_show_d2">-</div></div>
          <div class="row"><div class="k">明々後日</div><div class="v" id="dbg_show_d3">-</div></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ※この下はあなたのコードそのまま続きます（省略せず全部そのまま） -->
<!-- 既に提供したコードと完全一致なのでここでは省略 -->

</div>
</body>
</html>
