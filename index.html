<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>仕込み計算</title>

<link rel="icon" type="image/png" href="favicon.png">

<style>
  body { font-family: system-ui; margin: 20px; }
  .card { max-width: 860px; margin: auto; padding: 16px; border: 1px solid #ddd; border-radius: 12px; }

  h3 { margin: 18px 0 8px; }

  .grid {
    display: grid;
    grid-template-columns: 120px 1fr 1fr;
    gap: 8px 12px;
    align-items: center;
  }

  .expr { text-align: right; font-weight: bold; }

  .date {
    font-size: 12px;
    border: 1px solid #ddd;
    padding: 2px 8px;
    border-radius: 999px;
    text-align: center;
  }

  .bigrow {
    display:flex;
    justify-content: space-between;
    padding: 8px 0;
    border-top: 1px solid #eee;
  }

  .big { font-size: 22px; font-weight: bold; }

  .section {
    border: 1px solid #ccc;
    padding: 10px;
    margin-bottom: 12px;
    border-radius: 8px;
  }

  .section-title {
    font-weight: bold;
    margin-bottom: 6px;
    font-size: 18px;
  }

  .label-bold { font-weight: bold; margin-bottom: 6px; }

  .input-group { margin-bottom: 10px; }
  .input-group label { display: block; font-size: 14px; margin-bottom: 2px; }

  .input-group input {
    width: 100%;
    max-width: 250px;
    padding: 8px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 8px;
  }

  .other-row{
    display:flex;
    justify-content: space-between;
    padding: 8px 0;
    border-top: 1px solid #eee;
  }

  .debug-wrap { margin-bottom: 12px; }
  .debug-row {
    display:flex;
    align-items:center;
    gap: 10px;
    flex-wrap: wrap;
  }
  .debug-grid {
    display: grid;
    grid-template-columns: 160px 1fr;
    gap: 8px 12px;
    margin-top: 10px;
  }
  .debug-grid label { font-size: 14px; }
  .debug-grid input {
    width: 100%;
    max-width: 250px;
    padding: 6px;
    font-size: 14px;
    border: 1px solid #ccc;
    border-radius: 8px;
  }
  .muted { font-size: 12px; color: #666; }
  .hidden { display:none; }

  .debug-preview {
    margin-top: 8px;
    font-size: 14px;
  }
  .debug-preview .row{
    display:flex;
    gap: 10px;
    padding: 2px 0;
  }
  .debug-preview .k{
    width: 90px;
    color: #444;
  }
  .debug-preview .v{
    font-weight: 600;
  }
</style>
</head>

<body>
<div class="card">

<h2>仕込み計算</h2>

<!-- デバッグ -->
<div class="section debug-wrap">
  <div class="section-title">デバッグ</div>

  <div class="debug-row">
    <label style="display:flex;align-items:center;gap:8px;">
      <input id="debugToggle" type="checkbox">
      デバッグモード
    </label>
    <span class="muted">ONのとき「本日（基準日）」を入れると、明日/明後日/明々後日を自動設定します</span>
  </div>

  <div id="debugPanel" class="hidden">
    <div class="debug-grid">
      <label for="dbg_base">本日（基準日）</label>
      <div>
        <input id="dbg_base" type="date">

        <div class="debug-preview">
          <div class="row"><div class="k">明日</div><div class="v" id="dbg_show_d1">-</div></div>
          <div class="row"><div class="k">明後日</div><div class="v" id="dbg_show_d2">-</div></div>
          <div class="row"><div class="k">明々後日</div><div class="v" id="dbg_show_d3">-</div></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 入力：粉 -->
<div class="section">
  <div class="section-title">粉</div>
  <div class="label-bold">前日在庫</div>

  <div class="input-group">
    <label>からあげ</label>
    <input id="kara1" type="number" placeholder="17時時点の在庫">
  </div>

  <div class="input-group">
    <label>ちびから</label>
    <input id="chibi1" type="number" placeholder="17時時点の在庫">
  </div>
</div>

<!-- 入力：下味 -->
<div class="section">
  <div class="section-title">下味</div>
  <div class="label-bold">前日在庫</div>

  <div class="input-group">
    <label>からあげ</label>
    <input id="kara2" type="number" placeholder="17時時点の在庫">
  </div>

  <div class="input-group">
    <label>ちびから</label>
    <input id="chibi2" type="number" placeholder="17時時点の在庫">
  </div>
</div>

<!-- 入力：その他 -->
<div class="section">
  <div class="section-title">その他</div>

  <div class="input-group">
    <label>塩からあげ</label>
    <input id="shio" type="number" placeholder="17時時点の在庫">
  </div>

  <div class="input-group">
    <label>スティック</label>
    <input id="stick" type="number" placeholder="17時時点の在庫">
  </div>

  <div class="input-group">
    <label>旨辛</label>
    <input id="umakara" type="number" placeholder="17時時点の在庫">
  </div>
</div>

<!-- 粉 -->
<h3>粉</h3>
<div class="grid">
  <div></div>
  <div class="date" id="d1">-</div>
  <div class="date" id="d2">-</div>

  <div>からあげ</div>
  <div class="expr" id="k_s1">-</div>
  <div class="expr" id="k_s2">-</div>

  <div>ちびから</div>
  <div class="expr" id="c_s1">-</div>
  <div class="expr" id="c_s2">-</div>
</div>

<div class="bigrow">
  <div>本日　粉つけ（からあげ）</div>
  <div class="big" id="k_out2">-</div>
</div>
<div class="bigrow">
  <div>本日　粉つけ（ちびから）</div>
  <div class="big" id="c_out2">-</div>
</div>

<hr>

<!-- 下味 -->
<h3>下味</h3>
<div class="grid">
  <div></div>
  <div class="date" id="d3a">-</div>
  <div class="date" id="d3b">-</div>

  <div>からあげ</div>
  <div class="expr" id="k_s3">-</div>
  <div class="expr" id="k_s4">-</div>

  <div>ちびから</div>
  <div class="expr" id="c_s3">-</div>
  <div class="expr" id="c_s4">-</div>
</div>

<div class="bigrow">
  <div>本日　下味（からあげ）</div>
  <div class="big" id="k_out4">-</div>
</div>
<div class="bigrow">
  <div>本日　下味（ちびから）</div>
  <div class="big" id="c_out4">-</div>
</div>

<hr>

<!-- その他 -->
<h3>その他</h3>

<div class="other-row">
  <div>塩からあげ</div>
  <div class="big" id="shio_out">-</div>
</div>

<div class="other-row">
  <div>スティック</div>
  <div class="big" id="stick_out">-</div>
</div>

<div class="other-row">
  <div>旨辛</div>
  <div class="big" id="umakara_out">-</div>
</div>

</div>

<script>
/* （ここは前回のまま完全維持） */
</script>

</body>
</html>
